$$
\newcommand{\bs}{\boldsymbol}
\newcommand{\d}{\mathrm d}
\newcommand{\f}{\frac}
\newcommand{\add}[2]{#2 + #1 #2}
\newcommand{\dd}[1]{\f{\d}{\d#1}}
\newcommand{\fs}[3]{\f{#1 #2}{#1 #3}}
\def \intd#1 in range(#2,#3)#4{\int_{#2}^{#3} #4 \d #1}
$$

# 运动方程
## 1. 广义坐标

### 坐标
在朴素认知上, 可以把坐标分为径矢 $\bs r$ 和 时间 $t$ . 径矢 $\bs r$ 用广义坐标表示为 $(q_1, q_2, q_3)$ , 用笛卡尔坐标表示为 $(x, y, z)$ .
$$
(\bs r, t) \rightarrow (q_1, q_2, q_3, t) \\
or (x, y, z, t)
$$

### 变化
$$
\bs v := \fs \d {\bs r} t \\
$$
$$
\bs{\dot r} := \bs v
$$

### 运动方程
$q$ 的二阶微分方程

## 2. 最小作用量原理

### 拉格朗日函数
$$
L(q, \dot q, t)
$$

### 作用量
$$
t_2 = \add{\Delta}{t_1}
$$
$$
S = \intd t in range(t_1,t_2) {
        L(q, \dot q, t)
}
$$

### 推导运动方程
$$
\delta q(t_1) = \delta q(t_2) = 0
$$
$$
\begin{aligned}
        \delta S
        &= \intd t in range(t_1,t_2) {
                L(\add \delta q, \add \delta {\dot q}, t)
        } - \intd t in range(t_1,t_2) {
                L(q, \dot q, t)
        } \\

        &= \intd t in range(t_1,t_2) {
                \left[
                        L(\add \delta q, \add \delta {\dot q}, t -
                        L(q, \dot q, t)
                \right]
        } \\

        &= 0 \\
\end{aligned}
$$
全微分, 得
$$
\begin{aligned}
        \intd t in range(t_1,t_2) {
                \left(
                        \fs \partial L q \delta q + 
                        \fs \partial L {\dot q} \delta \dot q
                \right)
        }
        &= \intd t in range(t_1,t_2) {
                \left(
                        \fs \partial L q \delta q + 
                        \fs \partial L {\dot q} \dd t \delta q
                \right)
        } \\

        &= \intd t in range(t_1,t_2) {
                \fs \partial L q \delta q
        } + \intd \delta q in range(t_1,t_2) {
                \fs \partial L {\dot q}
        } \\

        &= 0 \\
\end{aligned}
$$
对第二项分部积分
$$
\begin{aligned}
        \delta S

        &= \intd t in range(t_1,t_2) {
                \fs \partial L q \delta q
        } + \left.
                \fs \partial L {\dot q} \delta q
        \right|_{t_1}^{t_2}
        - \intd \fs \partial L {\dot q} in range(t_1,t_2) {
                \delta q
        } \\

        &= \left.
                \fs \partial L {\dot q} \delta q
        \right|_{t_1}^{t_2} + \intd t in range(t_1,t_2) {
                \left(
                        \fs \partial L q \delta q - 
                        \delta q \dd t \fs \partial L {\dot q}
                \right)
        } \\

        &= \left.
                \fs \partial L {\dot q} \delta q
        \right|_{t_1}^{t_2} + \intd t in range(t_1,t_2) {
                \left(
                        \fs \partial L q - 
                        \dd t \fs \partial L {\dot q}
                \right)
                \delta q
        } \\

        &= 0 \\
\end{aligned}
$$
由于 $\delta q(t_1) = \delta q(t_2) = 0$ , 第一项等于 $0$
$$
\intd t in range(t_1,t_2) {
        \left(
                \fs \partial L q - 
                \dd t \fs \partial L {\dot q}
        \right)
        \delta q
} = 0
$$
由于 $\delta q$ 可以取任意值, 得到方程
$$
\dd t \fs \partial L {\dot q} -
\fs \partial L q = 0
$$
在力学中称为*拉格朗日方程*.